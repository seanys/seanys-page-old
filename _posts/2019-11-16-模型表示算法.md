---

layout: post
title: "A Robust shape signature algorithm for 2D irregular bin packing"
subtitle: "A basic methodology for combination ways learning"
author: "sean"
header-img: "img/post-bg-ai.jpeg"
tags:
  - Bin packing
  - Machine Learnings
---

## What is matrix/vector representation of target

If we want to 



Shape signature is a very important 



**Good representation of target such as word, graph by vector or matrix is a very important procedure in machine learning**. Vectors and matrix can be taken as the learning input and the euclidean distance between vectors or matrix is also a good metric for the similarity of these two target.

In audio and images process, they can both be represented  by dense matrix and can be addressed by CNN. While in NLP and social network, it is hard to achieve a good representaion for text and graph.

**NLP(text/word):** If we store word simply by binary vector(one-hot representation) in which all words are enumerated, the demension of vectors will be large and the distribution of content in vectors will be sparse for that the amount of words is so large. Besides, CNN can learn the correlation of the various parts of the matrix, while there is none corelation between every single value in vector. 

**Social network(graph):** Adjacency matrix is the most traditional way to represent a graph. However, if the network or graph is big, there will be large amount of data redundancy and process will be hard because of the sparsity of adjacency martix. We cannot find the corelation of vertexes directly by this matrix.

![preview](https://tva1.sinaimg.cn/large/006y8mN6gy1g915us1fr7j30nt090aaj.jpg)

So, we can conclude **two critical points** for target representation problem:

1. Target martixs or vertors shouldn't have much data redundancy 
2. We can compute the corelation of items simply by feature vectors

Some useful methodology are proposed to solve these problem. The most famous ways to represent is word embedding and graph embedding with which we can show a word in text or vertex in graph by a meaningful vector. We can simply use these vectors to compute the corelation of vertexs and word. They can also be taken as the input of a neural network.

## How to represent a shape?

### Outline

There are many ways to describle and represent a shape.



### Region Based Methodology

If we want to represent a shape such as normal polygons, we can use binary matrices($A_{nn}$) . 

However, the two critical points above all show in these two methology. They can both not show the corelation of vertexs and the data redundancy of binary martices is large. Traditional ways to get the features of a shape is convolutional neural network with which we can judge what type of the shape and if it has a right angle etc.



<img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g919csw9dcj30p20dataj.jpg" style="zoom:60%">

If we want to know the exact situation of these shapes, for example where has a convex chain and the degree of this chain, we need compute the boundary one by one. If we want know the match degree of boundary chains of different polygons, we also need to compute them one by one.

### Contour Based Methodology

###  



## A Robust shape signature algorithm for 2D irregular bin packing

### Methodoloy Outline

<img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g91c36o2e6j317i0s0whi.jpg" alt="image-20191117205921281" style="zoom:30%;" />

Use binary matrix to represent a shape is expensive for shape matching beacuse of the spare distribution of value. Because our main aim is to match boundary chain, we  




$$
shape=\left[
 \begin{matrix}
   \delta_1 \\
   ... \\
   \delta_n 
  \end{matrix}
  \right]
$$





### Convex Polygon

We propose a new way to represent shape in vector. 





### Concave Polygon

| Last Two Intersection | Intersection Num |      |
| :------- | -------- | -------- |
| [2,1], [x,2], [0,0], none | 0                |      |
| [1,1], [3,2], [x,3]       | 1                |      |
| [0,1], [x,0], [2,2], none | 2 |      |
| [1,2], [x,1]              | 3 |      |

<img src="/Users/sean/Downloads/006y8mN6gy1g920xm1uaij30u00uljrx.png" alt="messigray" style="zoom:30%;" />

We don't take other extremly low probabilty situation into consideration. Our target shapes are datasets in [euro](https://www.euro-online.org/websites/esicup/data-sets/#1535972088237-bbcb74e3-b507) and [alibaba](https://tianchi.aliyun.com/competition/entrance/231749/introduction?spm=5176.12281949.1003.3.28f024484FeOTk).





### Envelope rectangle or original centroid distance

We use minimum envelop retangle centroid to compute the shap signature for the reason that we can get a less discrete data. We use convex simple polygons to compute the shape signature and analysis the variance of these two choice.

|                    | Envelop Rectangle Centroid | Shape Centroid |
| ------------------ | -------------------------- | -------------- |
| Variance           |                            |                |
| Standard Deviation |                            |                |

As we can see in this table, 



This problem can be seemed as rectangle combination with concave region. **Need test!!!**





## Results analysis

### Experiments Outline





### Different cut nums

We will get different results when cut polygons into different number of part.





### Some samples

Pictures below are the combination of origin shape and reconstruction result.

#### Sample1

<img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g91071j4i1j30eg0eca9z.jpg" alt="messigray" style="zoom:50%;" />

```python
# compute result
# 'contain_ratio' means the ratio of original covered by reconstruction result's 
# 'exceed_ratio' means the ratio of result beyond the scope of the original 
contain_ratio: 0.9991525202911788
exceed_ratio: 0.0005612289960938078
```

**Sample1 is a normal rectangle.** The rebuild result is nearly the same as original with contain_ratio nearly to 100% and exceed_ratio less than 0.1%

#### Sample2

![messigray](https://tva1.sinaimg.cn/large/006y8mN6gy1g9101vfx9oj30dg06e0sl.jpg)

```python
# compute result
contain_ratio: 0.9940540885994642
exceed_ratio: 0.004721888229572043
```

**Sample1 is a irregular shape.** The rebuild result is also nearly the same as original with contain_ratio equal 99.4% and exceed_ratio less than 0.5%

#### Sample3

Concave sample is still tested.



### Overall results



## Conclusion

Based on

We could embed this vector into lower demension vector and represent the relationship of shape feature.



