---
layout: post
title: "交通网络实验记录"
subtitle: "记录一下找Bug和做实验的过程"
author: "sean"
header-img: "img/post-bg-css.jpg"
tags:
  - bug

---

### 1月6日

终于找到问题了，啊这终于，写一个Blog记录一下，在逐个测试结果，比对数据的时候发现了错误，也是艰难

### 1月5日

1. 确认了计算的主要问题
2. 解决了这个问题

### 1月4日 重新开始使用

1. 主要来说，是进行两个OD的仿真实验，输出两个OD的各个位置的匹配概率，就可以解决了
2. 发现不可以，误差太小了

### 12月27日凌晨

1. 草草草！！！找到了，找数据，不要看实验结果，看仿真的数据有没有问题OK？？？比如上次的找到数据里面都是更小的，是拼车选择错误提前break，还有就是P出现了大于1，是因为初始的生成过大！！
2. 最大的概率是就是算错了，需要检查一下概率的计算，以及补充的计算处理来
3. 采用小规模的计算模式，逐个比较两个OD

### 12月26日

1. 为什么忽然出现了这么大的误差？？？？？莫名其妙。
2. 逐一检查一遍吧
3. 仿真的匹配，检索，整个都是没有出错的吧，从结果来看没错

### 12月25日

1. 按天为样本没有意义，8个阶段8个样本，排除订单小于2的OD
2. 这样子，每个阶段都选择订单数>2的OD，需要统一一下，所以就是每个阶段分别选择90%的OD
3. 整个重新做了一遍数据统计

### 12月24日 

1. Debug+统计的修正
2. 出现一个问题，一个是出发时间，一个是结束时间，这个可能会有差异，但是应该影响不大
3. 按天为样本处理OK了

### 12月22-23日

1. 白天在写论文
2. 写完了研究报告的初稿，以及仿真实验的初稿

### 12月21日

1. 先做统计，确认13500OD对于全部OD订单的效果，再做调整
2. 在写论文

### 12月18日-20日

1. 收敛的标准需要确认好，只需要到达了收敛的情况，那就可以视为开始收敛了
2. 计算的速度需要优化，可以更快当然是更好的
3. 统计可以分阶段实现，不要那么着急啊
4. 在准备报告，处理收敛的统计，以及算法的优化

### 12月17日 收尾预测实验整理

1. 统计误差和分析
2. 在做报告

### 12月16日 仿真预测实验记录

1. 8000OD求解算了一个半小时，预测值计算一个小时，误差2%
2. 后续几个事情比较烦，可能需要重新跑三个半月的OD实验，跑三个半月的泊松检验
3. **现阶段最重要的就是确认8000OD的预测结果和实际订单仿真结果一致，如果不一致的话再说吧，然后处理调整后的结果**
4. 理论上来说，订单比较多的，预测结果误差都不会太大，可以比较看一下
5. 实验结果比较好，真好真好真好真好，直接做一万四的预测，冲！！！

### 12月12-15日 关于仿真实验的比较与测试

1. 首先测试运行了四个月OD的统计，最后三百六十万订单跑起来太慢了，一个月的效果更好，基本没有不符合泊松分布（接受假设）
2. 其次跑了仿真，一开始按照四个月的全部运行，速度太慢了，还需要跑各种OD考虑情况的，不如就先跑一个月的结果了
3. 预测速度8000的速度太慢了都没跑完过，初步实验完全可以降低收敛的要求，最大值1e-4就完全OK，出结果最重要，以及可以先跑2500的结果
4. 但是后续还是需要进行全局预测，一个个往上分析就好了，需要分别按照总量和按天的样本统计，估计部分OD样本比较少会导致统计误差比较大，可以看看，如果比较大就忽略掉吗？
5. **实验结果发现，收敛要求上升可能导致预测效果变差，后续需要实验验证**
6. 忽然发现两个8000的OD对应的实际OD数目不一致，我疯了.......什么玩意啊简直，可能需要校正一下仿真的OD情况，要么以ODs_combined为准，要么以prestore为准
7. ODs_combined里面重叠的要不要删掉？全部不考虑重叠的情况！





### 12月11日 收敛错误

收敛错误，找不到问题在哪里，然后整个的重新修改，发现可以了？？？？或许可以重新一下统计的算法，还有仿真里面的计算



### 12月6日 预测结果错误

结果：统计口径错误

- [x] 是不是因为预测的计算搭建错了？
  - [x] 似乎是没有错的
- [x] 统计错误：统计指标错误
- [x] 为什么有些误差大有些误差小？
  - [x] 检查一下原因呗
- [ ] 分析错误过大原因
  - [ ] 看看啥原因
  - [ ] 分析一下呗
- [ ] 是不是仿真模型的共享距离算错了？
  - [ ] 应该也是没错的？
- [ ] 是不是拼车过程有错误
  - [ ] 理论上来说，和距离预测是一致的



拼车误差：如果比较低会比较大

### 12.1 卡方统计

卡方统计没啥问题，主要是数据量比较大



### 11月28日统计模型

11.28 统计分析思考，没啥大问题，不要死磕，浪费时间



### 11月21-25日预测模型

11-21 实验越来越复杂，但是记不住那么多内容其实，记录下来也花费太多时间，可以先推进实验再说



11.23最后发现是匹配错误了，而且有概率初始生成错误，其实就是要顺着变量的变化关系去求解



11.25 最后是寻找最可能出错的地方，还是需要逐步检查，发现数据错的



### 11月初网络建模调整

主要通过OpenStreetMap进行建模，然后需要进行数据清洗

