I"²<blockquote>
  <p>âœ… ï¼šå·²ç»æ•´ç†å¥½</p>

  <p>ğŸ’¤ ï¼šå¤§éƒ¨åˆ†æ•´ç†å¥½äº†ä½†æ˜¯æ²¡ç†è§£</p>

  <p>ğŸ†˜ ï¼šè¿˜æœ‰ä¸€éƒ¨åˆ†éœ€è¦æ•´ç†</p>

  <p>â˜£ï¸ ï¼šéœ€è¦æ•´ç†</p>
</blockquote>

<h2 id="æœç´¢ç®—æ³•">æœç´¢ç®—æ³•</h2>

<h3 id="ï¸å±€éƒ¨æ£€ç´¢local-search">â˜£ï¸å±€éƒ¨æ£€ç´¢ï¼ˆLocal Searchï¼‰</h3>

<h3 id="ï¸å˜é‚»åŸŸæ£€ç´¢variable-neighborhood-search">â˜£ï¸å˜é‚»åŸŸæ£€ç´¢ï¼ˆVariable Neighborhood Searchï¼‰</h3>

<h3 id="ï¸è¿­ä»£é‚»åŸŸæ£€ç´¢iterated-local-search-">â˜£ï¸è¿­ä»£é‚»åŸŸæ£€ç´¢ï¼ˆIterated Local Search, ï¼‰</h3>

<h2 id="ç²¾ç¡®ç®—æ³•">ç²¾ç¡®ç®—æ³•</h2>

<h3 id="ï¸åˆ†æ”¯å®šç•Œæ³•branch-and-bound">â˜£ï¸åˆ†æ”¯å®šç•Œæ³•ï¼ˆBranch and Boundï¼‰</h3>

<h3 id="ï¸å‰²å¹³é¢ç®—æ³•branch-and-cut">â˜£ï¸å‰²å¹³é¢ç®—æ³•ï¼ˆBranch and Cutï¼‰</h3>

<h3 id="ï¸åŠ¨æ€è§„åˆ’ç®—æ³•">â˜£ï¸åŠ¨æ€è§„åˆ’ç®—æ³•</h3>

<h2 id="è¿‘ä¼¼ç®—æ³•">è¿‘ä¼¼ç®—æ³•</h2>

<h3 id="-å‰è¨€">âœ… å‰è¨€</h3>

<p><strong>é—®é¢˜ä¸€</strong>ï¼šèˆªç­é€‰æ‹©æœ€ä¼˜ï¼Œå…±è®¡12ä¸ªèˆªç­ï¼Œè¦ä½¿å¾—æ€»çš„ç¥¨ä»·æœ€å°‘ä¸”æ¯ä¸ªäººçš„ç­‰å¾…æ—¶é—´ä¹‹å’Œæœ€å°</p>

<p><strong>é—®é¢˜äºŒ</strong>ï¼šå­¦ç”Ÿé€‰æ‹©å®¿èˆçš„é—®é¢˜ï¼Œæ¯ä¸ªå­¦ç”Ÿå¯ä»¥å®ç°å¡«æŠ¥å¿—æ„¿ï¼Œå¦‚æœå®‰æ’çš„å®¿èˆä¸å¿—æ„¿å®Œå…¨ä¸€è‡´ï¼Œåˆ™ä»£ä»·ä¸º0ï¼Œä¸ç¬¬äºŒå¿—æ„¿ä¸€è‡´ï¼Œä»£ä»·ä¸º1ï¼Œå¦‚æœæ²¡æœ‰å’Œå¿—æ„¿ä¸€è‡´ï¼Œä»£ä»·ä¸º3ã€‚</p>

<p><strong>æ ¸å¿ƒ</strong>ï¼šå°†è‡ªå·±è¦ä¼˜åŒ–çš„ç›®æ ‡é‡åŒ–çš„è¡¨è¾¾å‡ºæ¥ï¼Œæ˜¯è§£å†³ä¼˜åŒ–å‡½æ•°çš„å…³é”®</p>

<p><strong>æŸå¤±å‡½æ•°</strong>ï¼šå¦‚åœ¨æ™®é€šçš„æ•°å€¼ä¼˜åŒ–é—®é¢˜ä¸­ï¼Œå¯é€‰æ‹©å½“å‰å€¼ä¸ç›®æ ‡å€¼è·ç¦»çš„ç»å¯¹ä¹‹å·®ï¼Œæˆ–è€…ä½¿ç”¨å¹³æ–¹æŸå¤±å‡½æ•°å‡å¯ã€‚</p>

<p>ä»£ç å‚è€ƒèµ„æ–™ï¼šhttps://blog.csdn.net/bcj296050240/article/details/50839806</p>

<h3 id="-éšæœºæœç´¢ç®—æ³•">âœ… éšæœºæœç´¢ç®—æ³•</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre><span class="c1"># æœç´¢æ–¹æ³•1: éšæœºæœç´¢ç®—æ³•
# å‡½æ•°ä¼šä½œ1000æ¬¡éšæœºçŒœæµ‹ï¼Œè®°å½•æ€»ä»£ä»·æœ€ä½çš„æ–¹æ³•. domainä¸ºèˆªç­å·çš„èŒƒå›´ï¼ˆ0-9ï¼‰ï¼Œå…±æœ‰5ä¸ªäººï¼Œå› æ­¤å…±æœ‰10é¡¹
</span><span class="k">def</span> <span class="nf">randomoptimize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">):</span>
    <span class="n">best_sol</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">bestcost</span> <span class="o">=</span> <span class="mi">99999</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
        <span class="n">sol</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">):</span>  <span class="c1"># äººæ•°
</span>            <span class="n">sol</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">domain</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">domain</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">j</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">sol</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">domain</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">domain</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>

        <span class="k">print</span> <span class="n">sol</span><span class="p">[:]</span>
        <span class="n">newcost</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schedulecost</span><span class="p">(</span><span class="n">sol</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">newcost</span> <span class="o">&lt;</span> <span class="n">bestcost</span><span class="p">:</span>
            <span class="n">bestcost</span> <span class="o">=</span> <span class="n">newcost</span>
            <span class="n">best_sol</span> <span class="o">=</span> <span class="n">sol</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">continue</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">printschedule</span><span class="p">(</span><span class="n">best_sol</span><span class="p">)</span>
    <span class="k">print</span> <span class="s">"éšæœºæœç´¢ç®—æ³•çš„ç»“æœçš„æœ€å°ä»£ä»·æ˜¯ï¼š"</span><span class="p">,</span> <span class="n">bestcost</span>
    <span class="k">return</span> <span class="n">best_sol</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æ€»ç»“ï¼šé‡ç‚¹åœ¨éšæœºå‡½æ•°ï¼Œç›¸å½“äºå¤§é‡æšä¸¾ä½†æ˜¯ä¸è¿ç»­</p>

<h3 id="-çˆ¬å±±æ³•hill-climbing">âœ… çˆ¬å±±æ³•ï¼ˆHill Climbingï¼‰</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre></td><td class="rouge-code"><pre>    <span class="c1"># æœç´¢ç®—æ³•2ï¼šçˆ¬å±±æ³•
</span>    <span class="c1"># é¦–å…ˆéšæœºé€‰æ‹©ä¸€ä¸ªè§£ä½œä¸ºç§å­è§£ï¼Œæ¯æ¬¡å¯»æ‰¾è¿™ä¸ªç§å­ç›¸è¿‘çš„è§£ï¼Œå¦‚æœç›¸è¿‘çš„è§£æœ‰ä»£ä»·æ›´å°çš„è§£ï¼Œåˆ™æŠŠè¿™ä¸ªæ–°çš„è§£ä½œä¸ºç§å­
</span>    <span class="c1"># ä¾æ¬¡å¾ªç¯è¿›è¡Œï¼Œå½“å¾ªç¯åˆ°æŸç§å­é™„è¿‘çš„è§£éƒ½æ¯”è¯¥ç§å­çš„ä»£ä»·å¤§æ—¶ï¼Œè¯´æ˜åˆ°è¾¾äº†å±€éƒ¨æå°å€¼ç‚¹ï¼Œæœç´¢ç»“æŸ
</span>    <span class="k">def</span> <span class="nf">hillclimb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">):</span>
        <span class="c1"># éšæœºäº§ç”Ÿä¸€ä¸ªèˆªç­åºåˆ—ä½œä¸ºåˆå§‹ç§å­
</span>        <span class="n">seed</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">))]</span>
        <span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">neighbor</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="c1"># å¾ªç¯æ”¹å˜è§£çš„æ¯ä¸€ä¸ªå€¼äº§ç”Ÿä¸€ä¸ªä¸´è¿‘è§£çš„åˆ—è¡¨
</span>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)):</span>
                <span class="c1"># ä¸‹åˆ—åˆ¤æ–­æ˜¯ä¸ºäº†å°†æŸä¸€ä½åŠ å‡1åä¸è¶…å‡ºdomainçš„èŒƒå›´
</span>                <span class="c1"># print seed
</span>                <span class="k">if</span> <span class="n">seed</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="n">newneighbor</span> <span class="o">=</span> <span class="n">seed</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">seed</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">seed</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]</span>
                    <span class="c1"># print newneighbor[:]
</span>                    <span class="n">neighbor</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newneighbor</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">seed</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="n">newneighbor</span> <span class="o">=</span> <span class="n">seed</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">seed</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">seed</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]</span>
                    <span class="c1"># print newneighbor[:]
</span>                    <span class="n">neighbor</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newneighbor</span><span class="p">)</span>

            <span class="c1"># å¯¹æ‰€æœ‰çš„ä¸´è¿‘è§£è®¡ç®—ä»£ä»·ï¼Œæ’åºï¼Œå¾—åˆ°ä»£ä»·æœ€å°çš„è§£
</span>            <span class="n">neighbor_cost</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span>
                <span class="p">[(</span><span class="n">s</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">schedulecost</span><span class="p">(</span><span class="n">s</span><span class="p">))</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">neighbor</span><span class="p">],</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

            <span class="c1"># å¦‚æœæ–°çš„æœ€å°ä»£ä»· &gt; åŸç§å­ä»£ä»·ï¼Œåˆ™è·³å‡ºå¾ªç¯
</span>            <span class="k">if</span> <span class="n">neighbor_cost</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">schedulecost</span><span class="p">(</span><span class="n">seed</span><span class="p">):</span>
                <span class="k">break</span>

            <span class="c1"># æ–°çš„ä»£ä»·æ›´å°çš„ä¸´è¿‘è§£ä½œä¸ºæ–°çš„ç§å­
</span>            <span class="n">seed</span> <span class="o">=</span> <span class="n">neighbor_cost</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">print</span> <span class="s">"newseed = "</span><span class="p">,</span> <span class="n">seed</span><span class="p">[:],</span> <span class="s">" ä»£ä»·ï¼š"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">schedulecost</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span>
        <span class="c1"># è¾“å‡º
</span>        <span class="bp">self</span><span class="o">.</span><span class="n">printschedule</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span>
        <span class="k">print</span> <span class="s">"çˆ¬å±±æ³•å¾—åˆ°çš„è§£çš„æœ€å°ä»£ä»·æ˜¯"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">schedulecost</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">seed</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>æ€»ç»“</strong>ï¼šå¯¹äºå•å³°çš„ä¼˜åŒ–é—®é¢˜æ˜¯å¯ä»¥çš„ï¼Œå¯¹äºå¤šå³°é—®é¢˜å¯èƒ½ä¼šé™·å…¥å±€éƒ¨æœ€ä¼˜åŒ–ï¼Œå› ä¸ºåªä¼šæ£€ç´¢ä¸´è¿‘ç‚¹å¹¶è®¡ç®—æ•ˆæœã€‚å…¶æ¬¡ï¼Œçˆ¬å±±çš„é—®é¢˜åœ¨äºå¦‚ä½•å®ç°â€œä¸´è¿‘â€ï¼Œæ¯”å¦‚æ’æ–™ä¸­çš„NFPå°±å¯ä»¥æ¨¡æ‹Ÿâ€œä¸´è¿‘â€çš„æ•ˆæœã€‚</p>

<h3 id="-æ¨¡æ‹Ÿé€€ç«simulate-annealing">ğŸ†˜ æ¨¡æ‹Ÿé€€ç«ï¼ˆSimulate Annealingï¼‰</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre></td><td class="rouge-code"><pre>    <span class="c1"># æœç´¢ç®—æ³•4ï¼šæ¨¡æ‹Ÿé€€ç«ç®—æ³•
</span>    <span class="c1"># å‚æ•°ï¼šTä»£è¡¨åŸå§‹æ¸©åº¦ï¼Œcoolä»£è¡¨å†·å´ç‡ï¼Œstepä»£è¡¨æ¯æ¬¡é€‰æ‹©ä¸´è¿‘è§£çš„å˜åŒ–èŒƒå›´
</span>    <span class="c1"># åŸç†ï¼šé€€ç«ç®—æ³•ä»¥ä¸€ä¸ªé—®é¢˜çš„éšæœºè§£å¼€å§‹ï¼Œç”¨ä¸€ä¸ªå˜é‡è¡¨ç¤ºæ¸©åº¦ï¼Œè¿™ä¸€æ¸©åº¦å¼€å§‹æ—¶éå¸¸é«˜ï¼Œè€Œåé€æ­¥é™ä½
</span>    <span class="c1">#      åœ¨æ¯ä¸€æ¬¡è¿­ä»£æœŸé—´ï¼Œç®—æ³•ä¼šéšæœºé€‰ä¸­é¢˜è§£ä¸­çš„æŸä¸ªæ•°å­—ï¼Œç„¶åæœæŸä¸ªæ–¹å‘å˜åŒ–ã€‚å¦‚æœæ–°çš„æˆæœ¬å€¼æ›´
</span>    <span class="c1">#      ä½ï¼Œåˆ™æ–°çš„é¢˜è§£å°†ä¼šå˜æˆå½“å‰é¢˜è§£ï¼Œè¿™ä¸çˆ¬å±±æ³•ç±»ä¼¼ã€‚ä¸è¿‡ï¼Œå¦‚æœæˆæœ¬å€¼æ›´é«˜çš„è¯ï¼Œåˆ™æ–°çš„é¢˜è§£ä»
</span>    <span class="c1">#      æœ‰å¯èƒ½æˆä¸ºå½“å‰é¢˜è§£ï¼Œè¿™æ˜¯é¿å…å±€éƒ¨æå°å€¼é—®é¢˜çš„ä¸€ç§å°è¯•ã€‚
</span>    <span class="c1"># æ³¨æ„ï¼šç®—æ³•æ€»ä¼šæ¥å—ä¸€ä¸ªæ›´ä¼˜çš„è§£ï¼Œè€Œä¸”åœ¨é€€ç«çš„å¼€å§‹é˜¶æ®µä¼šæ¥å—è¾ƒå·®çš„è§£ï¼Œéšç€é€€ç«çš„ä¸æ–­è¿›è¡Œï¼Œç®—æ³•
</span>    <span class="c1">#      åŸæ¥è¶Šä¸èƒ½æ¥å—è¾ƒå·®çš„è§£ï¼Œç›´åˆ°æœ€åï¼Œå®ƒåªèƒ½æ¥å—æ›´ä¼˜çš„è§£ã€‚
</span>    <span class="c1"># ç®—æ³•æ¥å—è¾ƒå·®è§£çš„æ¦‚ç‡ P = exp[-(highcost-lowcost)/temperature]
</span>    <span class="k">def</span> <span class="nf">annealingoptimize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">T</span><span class="o">=</span><span class="mf">10000.0</span><span class="p">,</span> <span class="n">cool</span><span class="o">=</span><span class="mf">0.98</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="c1"># éšæœºåˆå§‹åŒ–å€¼
</span>        <span class="n">vec</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">))]</span>

        <span class="c1"># å¾ªç¯
</span>        <span class="k">while</span> <span class="n">T</span> <span class="o">&gt;</span> <span class="mf">0.1</span><span class="p">:</span>
            <span class="c1"># é€‰æ‹©ä¸€ä¸ªç´¢å¼•å€¼
</span>            <span class="n">i</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="c1"># é€‰æ‹©ä¸€ä¸ªæ”¹å˜ç´¢å¼•å€¼çš„æ–¹å‘
</span>            <span class="n">c</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="n">step</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span>  <span class="c1"># -1 or 0 or 1
</span>            <span class="c1"># æ„é€ æ–°çš„è§£
</span>            <span class="n">vecb</span> <span class="o">=</span> <span class="n">vec</span><span class="p">[:]</span>
            <span class="n">vecb</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">c</span>
            <span class="k">if</span> <span class="n">vecb</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>  <span class="c1"># åˆ¤æ–­è¶Šç•Œæƒ…å†µ
</span>                <span class="n">vecb</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">vecb</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">vecb</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>

            <span class="c1"># è®¡ç®—å½“å‰æˆæœ¬å’Œæ–°çš„æˆæœ¬
</span>            <span class="n">cost1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schedulecost</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span>
            <span class="n">cost2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schedulecost</span><span class="p">(</span><span class="n">vecb</span><span class="p">)</span>

            <span class="c1"># åˆ¤æ–­æ–°çš„è§£æ˜¯å¦ä¼˜äºåŸå§‹è§£ æˆ–è€… ç®—æ³•å°†ä»¥ä¸€å®šæ¦‚ç‡æ¥å—è¾ƒå·®çš„è§£
</span>            <span class="k">if</span> <span class="n">cost2</span> <span class="o">&lt;</span> <span class="n">cost1</span> <span class="ow">or</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">math</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">cost2</span> <span class="o">-</span> <span class="n">cost1</span><span class="p">)</span> <span class="o">/</span> <span class="n">T</span><span class="p">):</span>
                <span class="n">vec</span> <span class="o">=</span> <span class="n">vecb</span>

            <span class="n">T</span> <span class="o">=</span> <span class="n">T</span> <span class="o">*</span> <span class="n">cool</span>  <span class="c1"># æ¸©åº¦å†·å´
</span>            <span class="k">print</span> <span class="n">vecb</span><span class="p">[:],</span> <span class="s">"ä»£ä»·:"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">schedulecost</span><span class="p">(</span><span class="n">vecb</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">printschedule</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span>
        <span class="k">print</span> <span class="s">"æ¨¡æ‹Ÿé€€ç«ç®—æ³•å¾—åˆ°çš„æœ€å°ä»£ä»·æ˜¯ï¼š"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">schedulecost</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">vec</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æ€»ç»“ï¼š</p>

<h3 id="-é—ä¼ ç®—æ³•">ğŸ†˜ é—ä¼ ç®—æ³•</h3>

<blockquote>
  <p>é€‰æ‹©ï¼ˆSelectï¼‰ï¼šå¯ç†è§£ä¸ºä¼˜èƒœåŠ£æ±°ï¼Œéƒ¨åˆ†é€‚åº”èƒ½åŠ›å¼ºçš„ä¸ªä½“è¢«ä¿ç•™ï¼Œè€Œè¾ƒå¼±çš„åˆ™é€æ¸æ¶ˆå¤±ã€‚å¸¸ç”¨çš„é€‰æ‹©ç­–ç•¥æ˜¯ â€œæ¯”ä¾‹é€‰æ‹©â€ï¼Œä¹Ÿå°±æ˜¯ä¸ªä½“è¢«é€‰ä¸­çš„æ¦‚ç‡ä¸å…¶é€‚åº”åº¦å‡½æ•°å€¼æˆæ­£æ¯”ã€‚</p>

  <p>äº¤å‰(Crossover)ï¼š å³ç¹è¡åä»£ï¼Œä¸¤ä¸ªä¸ªä½“çš„DNAè¿›è¡Œäº¤å‰èåˆï¼Œä»è€Œäº§ç”Ÿä¸‹ä¸€ä»£ã€‚</p>

  <p>å˜å¼‚(Mutation)ï¼šåœ¨ç¹æ®–è¿‡ç¨‹ä¸­ï¼Œä¸‹ä¸€ä»£æŸ“è‰²ä½“çš„åŸºå› ä¼šæœ‰ä¸€å®šæ¦‚ç‡äº§ç”Ÿå˜å¼‚ã€‚å˜å¼‚å‘ç”Ÿçš„æ¦‚ç‡è®°ä¸ºPã€‚</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
</pre></td><td class="rouge-code"><pre><span class="c1"># æœç´¢ç®—æ³•5ï¼š é—ä¼ ç®—æ³•
# åŸç†ï¼š é¦–å…ˆéšæœºç”Ÿæˆä¸€ç»„è§£ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºç§ç¾¤ï¼Œåœ¨ä¼˜åŒ–è¿‡ç¨‹çš„æ¯ä¸€æ­¥ï¼Œç®—æ³•ä¼šè®¡ç®—æ•´ä¸ªç§ç¾¤çš„æˆæœ¬å‡½æ•°ï¼Œ
#       ä»è€Œå¾—åˆ°ä¸€ä¸ªæœ‰å…³é¢˜è§£çš„æœ‰åºåˆ—è¡¨ã€‚éšåæ ¹æ®ç§ç¾¤æ„é€ è¿›åŒ–çš„ä¸‹ä¸€ä»£ç§ç¾¤ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š
#       é—ä¼ ï¼šä»å½“å‰ç§ç¾¤ä¸­é€‰å‡ºä»£ä»·æœ€ä¼˜çš„ä¸€éƒ¨åˆ†åŠ å…¥ä¸‹ä¸€ä»£ç§ç¾¤ï¼Œç§°ä¸ºâ€œç²¾è‹±é€‰æ‹”â€
#       å˜å¼‚ï¼šå¯¹ä¸€ä¸ªæ—¢æœ‰è§£è¿›è¡Œå¾®å°çš„ã€ç®€å•çš„ã€éšæœºçš„ä¿®æ”¹
#       äº¤å‰ï¼šé€‰å–æœ€ä¼˜è§£ä¸­çš„ä¸¤ä¸ªè§£ï¼ŒæŒ‰ç…§æŸç§æ–¹å¼è¿›è¡Œäº¤å‰ã€‚æ–¹æ³•æœ‰å•ç‚¹äº¤å‰ï¼Œå¤šç‚¹äº¤å‰å’Œå‡åŒ€äº¤å‰
# ä¸€ä¸ªç§ç¾¤æ˜¯é€šè¿‡å¯¹æœ€ä¼˜è§£è¿›è¡Œéšæœºçš„å˜å¼‚å’Œé…å¯¹å¤„ç†æ„é€ å‡ºæ¥çš„ï¼Œå®ƒçš„å¤§å°é€šå¸¸ä¸æ—§çš„ç§ç¾¤ç›¸åŒï¼Œå°”åï¼Œè¿™ä¸€è¿‡ç¨‹ä¼š
#       ä¸€ç›´é‡å¤è¿›è¡Œâ€”â€”â€”â€”æ–°çš„ç§ç¾¤ç»è¿‡æ’åºï¼Œåˆä¸€ä¸ªç§ç¾¤è¢«æ„é€ å‡ºæ¥ï¼Œå¦‚æœè¾¾åˆ°æŒ‡å®šçš„è¿­ä»£æ¬¡æ•°ä¹‹åé¢˜è§£éƒ½æ²¡æœ‰å¾—
#       æ”¹å–„ï¼Œæ•´ä¸ªè¿‡ç¨‹å°±ç»“æŸäº†
# å‚æ•°ï¼š
# popsize-ç§ç¾¤æ•°é‡ step-å˜å¼‚æ”¹å˜çš„å¤§å° mutprob-äº¤å‰å’Œå˜å¼‚çš„æ¯”ä¾‹ elite-ç›´æ¥é—ä¼ çš„æ¯”ä¾‹ maxiter-æœ€å¤§è¿­ä»£æ¬¡æ•°
</span><span class="k">def</span> <span class="nf">geneticoptimize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">popsize</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">mutprob</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">elite</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">maxiter</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
    <span class="c1"># å˜å¼‚æ“ä½œçš„å‡½æ•°
</span>    <span class="k">def</span> <span class="nf">mutate</span><span class="p">(</span><span class="n">vec</span><span class="p">):</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.5</span> <span class="ow">and</span> <span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">step</span><span class="p">]</span> <span class="o">+</span> <span class="n">vec</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]</span>
        <span class="k">elif</span> <span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">step</span><span class="p">]</span> <span class="o">+</span> <span class="n">vec</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]</span>

    <span class="c1"># äº¤å‰æ“ä½œçš„å‡½æ•°ï¼ˆå•ç‚¹äº¤å‰ï¼‰
</span>    <span class="k">def</span> <span class="nf">crossover</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">):</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">r1</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">r2</span><span class="p">[</span><span class="n">i</span><span class="p">:]</span>

    <span class="c1"># æ„é€ åˆå§‹ç§ç¾¤
</span>    <span class="n">pop</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">popsize</span><span class="p">):</span>
        <span class="n">vec</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">))]</span>
        <span class="n">pop</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span>

    <span class="c1"># æ¯ä¸€ä»£ä¸­æœ‰å¤šå°‘èƒœå‡ºè€…
</span>    <span class="n">topelite</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">elite</span> <span class="o">*</span> <span class="n">popsize</span><span class="p">)</span>

    <span class="c1"># ä¸»å¾ªç¯
</span>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">maxiter</span><span class="p">):</span>
        <span class="n">scores</span> <span class="o">=</span> <span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">schedulecost</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">pop</span><span class="p">]</span>
        <span class="n">scores</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">ranked</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span> <span class="k">for</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">in</span> <span class="n">scores</span><span class="p">]</span>  <span class="c1"># è§£æŒ‰ç…§ä»£ä»·ç”±å°åˆ°å¤§çš„æ’åº
</span>
        <span class="c1"># ä¼˜è´¨è§£é—ä¼ åˆ°ä¸‹ä¸€ä»£
</span>        <span class="n">pop</span> <span class="o">=</span> <span class="n">ranked</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span> <span class="n">topelite</span><span class="p">]</span>

        <span class="c1"># å¦‚æœå½“å‰ç§ç¾¤æ•°é‡å°äºæ—¢å®šæ•°é‡ï¼Œåˆ™æ·»åŠ å˜å¼‚å’Œäº¤å‰é—ä¼ 
</span>        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">pop</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">popsize</span><span class="p">:</span>
            <span class="c1"># éšæœºæ•°å°äº mutprob åˆ™å˜å¼‚ï¼Œå¦åˆ™äº¤å‰
</span>            <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">mutprob</span><span class="p">:</span>  <span class="c1"># mutprobæ§åˆ¶äº¤å‰å’Œå˜å¼‚çš„æ¯”ä¾‹
</span>                <span class="c1"># é€‰æ‹©ä¸€ä¸ªä¸ªä½“
</span>                <span class="n">c</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">topelite</span><span class="p">)</span>
                <span class="c1"># å˜å¼‚
</span>                <span class="n">pop</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mutate</span><span class="p">(</span><span class="n">ranked</span><span class="p">[</span><span class="n">c</span><span class="p">]))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># éšæœºé€‰æ‹©ä¸¤ä¸ªä¸ªä½“è¿›è¡Œäº¤å‰
</span>                <span class="n">c1</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">topelite</span><span class="p">)</span>
                <span class="n">c2</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">topelite</span><span class="p">)</span>
                <span class="n">pop</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">crossover</span><span class="p">(</span><span class="n">ranked</span><span class="p">[</span><span class="n">c1</span><span class="p">],</span> <span class="n">ranked</span><span class="p">[</span><span class="n">c2</span><span class="p">]))</span>
        <span class="c1"># è¾“å‡ºå½“å‰ç§ç¾¤ä¸­ä»£ä»·æœ€å°çš„è§£
</span>        <span class="k">print</span> <span class="n">scores</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="s">"ä»£ä»·ï¼š"</span><span class="p">,</span> <span class="n">scores</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">printschedule</span><span class="p">(</span><span class="n">scores</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">print</span> <span class="s">"é—ä¼ ç®—æ³•æ±‚å¾—çš„æœ€å°ä»£ä»·ï¼š"</span><span class="p">,</span> <span class="n">scores</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">scores</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>æ€»ç»“ï¼š</p>

<h3 id="ï¸-ç¦å¿Œæœç´¢taboo-search">â˜£ï¸ ç¦å¿Œæœç´¢ï¼ˆTaboo Searchï¼‰</h3>

<p>å±€éƒ¨æ£€ç´¢ç®—æ³•ï¼Œ</p>

<h3 id="ï¸-èšç¾¤ç®—æ³•">â˜£ï¸ èšç¾¤ç®—æ³•</h3>

<h3 id="ï¸-ç²’å­ç¾¤ç®—æ³•1995">â˜£ï¸ ç²’å­ç¾¤ç®—æ³•ï¼ˆ1995ï¼‰</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
</pre></td><td class="rouge-code"><pre><span class="c1"># -*- coding: utf-8 -*-
</span><span class="kn">import</span> <span class="nn">sys</span>
<span class="nb">reload</span><span class="p">(</span><span class="n">sys</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">setdefaultencoding</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="c1"># ç›®æ ‡å‡½æ•°å®šä¹‰
</span><span class="k">def</span> <span class="nf">ras</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mi">20</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">10</span><span class="o">*</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
    <span class="k">return</span> <span class="n">y</span>
    
<span class="c1"># å‚æ•°åˆå§‹åŒ–
</span><span class="n">w</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">c1</span> <span class="o">=</span> <span class="mf">1.49445</span>
<span class="n">c2</span> <span class="o">=</span> <span class="mf">1.49445</span>

<span class="n">maxgen</span> <span class="o">=</span> <span class="mi">200</span>   <span class="c1"># è¿›åŒ–æ¬¡æ•°  
</span><span class="n">sizepop</span> <span class="o">=</span> <span class="mi">20</span>   <span class="c1"># ç§ç¾¤è§„æ¨¡
</span>
<span class="c1"># ç²’å­é€Ÿåº¦å’Œä½ç½®çš„èŒƒå›´
</span><span class="n">Vmax</span> <span class="o">=</span>  <span class="mi">1</span>
<span class="n">Vmin</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="n">popmax</span> <span class="o">=</span>  <span class="mi">5</span>
<span class="n">popmin</span> <span class="o">=</span> <span class="o">-</span><span class="mi">5</span>


<span class="c1"># äº§ç”Ÿåˆå§‹ç²’å­å’Œé€Ÿåº¦
</span><span class="n">pop</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,(</span><span class="mi">2</span><span class="p">,</span><span class="n">sizepop</span><span class="p">))</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,(</span><span class="mi">2</span><span class="p">,</span><span class="n">sizepop</span><span class="p">))</span>


<span class="n">fitness</span> <span class="o">=</span> <span class="n">ras</span><span class="p">(</span><span class="n">pop</span><span class="p">)</span>             <span class="c1"># è®¡ç®—é€‚åº”åº¦
</span><span class="n">i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span>      <span class="c1"># æ‰¾æœ€å¥½çš„ä¸ªä½“
</span><span class="n">gbest</span> <span class="o">=</span> <span class="n">pop</span>                    <span class="c1"># è®°å½•ä¸ªä½“æœ€ä¼˜ä½ç½®
</span><span class="n">zbest</span> <span class="o">=</span> <span class="n">pop</span><span class="p">[:,</span><span class="n">i</span><span class="p">]</span>              <span class="c1"># è®°å½•ç¾¤ä½“æœ€ä¼˜ä½ç½®
</span><span class="n">fitnessgbest</span> <span class="o">=</span> <span class="n">fitness</span>        <span class="c1"># ä¸ªä½“æœ€ä½³é€‚åº”åº¦å€¼
</span><span class="n">fitnesszbest</span> <span class="o">=</span> <span class="n">fitness</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>      <span class="c1"># å…¨å±€æœ€ä½³é€‚åº”åº¦å€¼
</span>

<span class="c1"># è¿­ä»£å¯»ä¼˜
</span><span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">record</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">maxgen</span><span class="p">)</span>
<span class="k">while</span> <span class="n">t</span> <span class="o">&lt;</span> <span class="n">maxgen</span><span class="p">:</span>
    
    <span class="c1"># é€Ÿåº¦æ›´æ–°
</span>    <span class="n">v</span> <span class="o">=</span> <span class="n">w</span> <span class="o">*</span> <span class="n">v</span> <span class="o">+</span> <span class="n">c1</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="n">gbest</span> <span class="o">-</span> <span class="n">pop</span><span class="p">)</span> <span class="o">+</span> <span class="n">c2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="n">zbest</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="n">pop</span><span class="p">)</span>
    <span class="n">v</span><span class="p">[</span><span class="n">v</span> <span class="o">&gt;</span> <span class="n">Vmax</span><span class="p">]</span> <span class="o">=</span> <span class="n">Vmax</span>     <span class="c1"># é™åˆ¶é€Ÿåº¦
</span>    <span class="n">v</span><span class="p">[</span><span class="n">v</span> <span class="o">&lt;</span> <span class="n">Vmin</span><span class="p">]</span> <span class="o">=</span> <span class="n">Vmin</span>
    
    <span class="c1"># ä½ç½®æ›´æ–°
</span>    <span class="n">pop</span> <span class="o">=</span> <span class="n">pop</span> <span class="o">+</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">v</span><span class="p">;</span>
    <span class="n">pop</span><span class="p">[</span><span class="n">pop</span> <span class="o">&gt;</span> <span class="n">popmax</span><span class="p">]</span> <span class="o">=</span> <span class="n">popmax</span>  <span class="c1"># é™åˆ¶ä½ç½®
</span>    <span class="n">pop</span><span class="p">[</span><span class="n">pop</span> <span class="o">&lt;</span> <span class="n">popmin</span><span class="p">]</span> <span class="o">=</span> <span class="n">popmin</span>
    
    <span class="s">'''
    # è‡ªé€‚åº”å˜å¼‚
    p = np.random.random()             # éšæœºç”Ÿæˆä¸€ä¸ª0~1å†…çš„æ•°
    if p &gt; 0.8:                          # å¦‚æœè¿™ä¸ªæ•°è½åœ¨å˜å¼‚æ¦‚ç‡åŒºé—´å†…ï¼Œåˆ™è¿›è¡Œå˜å¼‚å¤„ç†
        k = np.random.randint(0,2)     # åœ¨[0,2)ä¹‹é—´éšæœºé€‰ä¸€ä¸ªæ•´æ•°
        pop[:,k] = np.random.random()  # åœ¨é€‰å®šçš„ä½ç½®è¿›è¡Œå˜å¼‚ 
    '''</span>

    <span class="c1"># è®¡ç®—é€‚åº”åº¦å€¼
</span>    <span class="n">fitness</span> <span class="o">=</span> <span class="n">ras</span><span class="p">(</span><span class="n">pop</span><span class="p">)</span>
    
    <span class="c1"># ä¸ªä½“æœ€ä¼˜ä½ç½®æ›´æ–°
</span>    <span class="n">index</span> <span class="o">=</span> <span class="n">fitness</span> <span class="o">&lt;</span> <span class="n">fitnessgbest</span>
    <span class="n">fitnessgbest</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">fitness</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
    <span class="n">gbest</span><span class="p">[:,</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">pop</span><span class="p">[:,</span><span class="n">index</span><span class="p">]</span>

    <span class="c1"># ç¾¤ä½“æœ€ä¼˜æ›´æ–°
</span>    <span class="n">j</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">fitness</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">fitnesszbest</span><span class="p">:</span>
        <span class="n">zbest</span> <span class="o">=</span> <span class="n">pop</span><span class="p">[:,</span><span class="n">j</span><span class="p">]</span>
        <span class="n">fitnesszbest</span> <span class="o">=</span> <span class="n">fitness</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>

    <span class="n">record</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">=</span> <span class="n">fitnesszbest</span> <span class="c1"># è®°å½•ç¾¤ä½“æœ€ä¼˜ä½ç½®çš„å˜åŒ–   
</span>    
    <span class="n">t</span> <span class="o">=</span> <span class="n">t</span> <span class="o">+</span> <span class="mi">1</span>
    

<span class="c1"># ç»“æœåˆ†æ
</span><span class="k">print</span> <span class="n">zbest</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">record</span><span class="p">,</span><span class="s">'b-'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">'generation'</span><span class="p">)</span>  
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">'fitness'</span><span class="p">)</span>  
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">'fitness curve'</span><span class="p">)</span>  
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å‚è€ƒï¼šhttps://www.cnblogs.com/21207-iHome/p/6062535.html</p>

<h3 id="-å¸ƒè°·é¸Ÿæœç´¢2009-cuckoo-search">âœ… å¸ƒè°·é¸Ÿæœç´¢ï¼ˆ2009 Cuckoo Searchï¼‰</h3>

<p><img src="https://vlight.me/images/CS_via_Levy_Flights.png" style="zoom:50%" /></p>

<p>è§‰å¾—æ²¡å•¥å¾ˆå¤§ç”¨</p>

<p>å‚è€ƒèµ„æ–™ï¼šhttps://vlight.me/2017/12/17/Cuckoo-Search/</p>

<h3 id="-ç»¼åˆæ¡ˆä¾‹">ğŸ†˜ ç»¼åˆæ¡ˆä¾‹</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
</pre></td><td class="rouge-code"><pre><span class="c1"># -*-  coding: utf-8 -*-
</span><span class="n">__author__</span> <span class="o">=</span> <span class="s">'Bai Chenjia'</span>

<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="s">"""
å®¿èˆåˆ†é…é—®é¢˜ï¼Œå±äºæœç´¢ä¼˜åŒ–é—®é¢˜ã€‚ä¼˜åŒ–æ–¹æ³•ä½¿ç”¨optimization.pyä¸­ä½¿ç”¨çš„
éšæœºæœç´¢ã€çˆ¬å±±æ³•ã€æ¨¡æ‹Ÿé€€ç«æ³•ã€é—ä¼ ç®—æ³•ç­‰. ä½†é¢˜è§£çš„æè¿°æ¯”ä¹‹å‰çš„é—®é¢˜å¤æ‚
"""</span>


<span class="k">class</span> <span class="nc">dorm</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># ä»£è¡¨å®¿èˆï¼Œæ¯ä¸ªå®¿èˆæœ‰ä¸¤ä¸ªéš”é—´å¯ç”¨
</span>        <span class="bp">self</span><span class="o">.</span><span class="n">dorms</span> <span class="o">=</span> <span class="p">[</span><span class="s">'Zeus'</span><span class="p">,</span> <span class="s">'Athena'</span><span class="p">,</span> <span class="s">'Hercules'</span><span class="p">,</span> <span class="s">'Bacchus'</span><span class="p">,</span> <span class="s">'Pluto'</span><span class="p">]</span>

        <span class="c1"># ä»£è¡¨é€‰æ‹©ï¼Œç¬¬ä¸€åˆ—ä»£è¡¨äººåï¼Œç¬¬äºŒåˆ—å’Œç¬¬ä¸‰åˆ—ä»£è¡¨è¯¥å­¦ç”Ÿçš„é¦–é€‰å’Œæ¬¡é€‰
</span>        <span class="bp">self</span><span class="o">.</span><span class="n">prefs</span> <span class="o">=</span> <span class="p">[(</span><span class="s">'Toby'</span><span class="p">,</span> <span class="p">(</span><span class="s">'Bacchus'</span><span class="p">,</span> <span class="s">'Hercules'</span><span class="p">)),</span>
                      <span class="p">(</span><span class="s">'Steve'</span><span class="p">,</span> <span class="p">(</span><span class="s">'Zeus'</span><span class="p">,</span> <span class="s">'Pluto'</span><span class="p">)),</span>
                      <span class="p">(</span><span class="s">'Karen'</span><span class="p">,</span> <span class="p">(</span><span class="s">'Athena'</span><span class="p">,</span> <span class="s">'Zeus'</span><span class="p">)),</span>
                      <span class="p">(</span><span class="s">'Sarah'</span><span class="p">,</span> <span class="p">(</span><span class="s">'Zeus'</span><span class="p">,</span> <span class="s">'Pluto'</span><span class="p">)),</span>
                      <span class="p">(</span><span class="s">'Dave'</span><span class="p">,</span> <span class="p">(</span><span class="s">'Athena'</span><span class="p">,</span> <span class="s">'Bacchus'</span><span class="p">)),</span>
                      <span class="p">(</span><span class="s">'Jeff'</span><span class="p">,</span> <span class="p">(</span><span class="s">'Hercules'</span><span class="p">,</span> <span class="s">'Pluto'</span><span class="p">)),</span>
                      <span class="p">(</span><span class="s">'Fred'</span><span class="p">,</span> <span class="p">(</span><span class="s">'Pluto'</span><span class="p">,</span> <span class="s">'Athena'</span><span class="p">)),</span>
                      <span class="p">(</span><span class="s">'Suzie'</span><span class="p">,</span> <span class="p">(</span><span class="s">'Bacchus'</span><span class="p">,</span> <span class="s">'Hercules'</span><span class="p">)),</span>
                      <span class="p">(</span><span class="s">'Laura'</span><span class="p">,</span> <span class="p">(</span><span class="s">'Bacchus'</span><span class="p">,</span> <span class="s">'Hercules'</span><span class="p">)),</span>
                      <span class="p">(</span><span class="s">'James'</span><span class="p">,</span> <span class="p">(</span><span class="s">'Hercules'</span><span class="p">,</span> <span class="s">'Athena'</span><span class="p">))]</span>

        <span class="c1"># é¢˜è§£çš„è¡¨ç¤ºæ³•ï¼š
</span>        <span class="c1"># è®¾æƒ³æ¯ä¸ªå®¿èˆæœ‰ä¸¤ä¸ªæ§½ï¼Œæœ¬ä¾‹ä¸­å…±æœ‰5ä¸ªå®¿èˆï¼Œåˆ™å…±æœ‰10ä¸ªæ§½ï¼Œæˆ‘ä»¬å°†æ¯åå­¦ç”Ÿä¾åºå®‰ç½®äºå„ç©ºæ§½
</span>        <span class="c1"># å†…â€”â€”â€”â€”åˆ™ç¬¬ä¸€åå­¦ç”Ÿæœ‰10ç§é€‰æ‹©ï¼Œè§£çš„å–å€¼èŒƒå›´ä¸º0-9ï¼›ç¬¬äºŒåå­¦ç”Ÿæœ‰9ç§é€‰æ‹©ï¼Œè§£çš„å–å€¼èŒƒå›´ä¸º
</span>        <span class="c1"># 0-8ï¼Œç¬¬ä¸‰åå­¦ç”Ÿè§£çš„å–å€¼èŒƒå›´æ˜¯0-7ï¼Œä»¥æ­¤ç±»æ¨ï¼Œæœ€åä¸€åå­¦ç”Ÿåªæœ‰ä¸€ä¸ªå¯é€‰ã€‚
</span>        <span class="c1"># æŒ‰ç…§ä¸Šè¿°é¢˜è§£çš„è¡¨ç¤ºæ³•åˆå§‹åŒ–é¢˜è§£èŒƒå›´ï¼š
</span>        <span class="bp">self</span><span class="o">.</span><span class="n">domain</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dorms</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefs</span><span class="p">))]</span>

    <span class="c1"># æ ¹æ®é¢˜è§£åºåˆ—vecæ‰“å°å‡ºæœ€ç»ˆå®¿èˆåˆ†é…æ–¹æ¡ˆ
</span>    <span class="c1"># æ³¨æ„ï¼Œè¾“å‡ºä¸€ä¸ªæ§½åè¡¨æ˜è¯¥æ§½å·²ç»ç”¨è¿‡ï¼Œéœ€å°†è¯¥æ§½åˆ é™¤
</span>    <span class="k">def</span> <span class="nf">printsolution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vec</span><span class="p">):</span>
        <span class="n">slots</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># slots = [0,0,1,1,2,2,3,3,4,4]
</span>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dorms</span><span class="p">)):</span>
            <span class="n">slots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">slots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="c1"># å¾ªç¯é¢˜è§£
</span>        <span class="k">print</span> <span class="s">"é€‰æ‹©æ–¹æ¡ˆæ˜¯ï¼š"</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">vec</span><span class="p">)):</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">slots</span><span class="p">[</span><span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
            <span class="k">print</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">dorms</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">slots</span><span class="p">[</span><span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>

    <span class="c1"># ä»£ä»·å‡½æ•°: å¦‚æœå­¦ç”Ÿå½“å‰å®‰ç½®çš„å®¿èˆä½¿å…¶é¦–é€‰åˆ™ä»£ä»·ä¸º0ï¼Œæ˜¯å…¶æ¬¡é€‰åˆ™ä»£ä»·ä¸º1ï¼Œå¦åˆ™ä»£ä»·ä¸º3
</span>    <span class="c1"># æ³¨æ„ï¼Œè¾“å‡ºä¸€ä¸ªæ§½åè¡¨æ˜è¯¥æ§½å·²ç»ç”¨è¿‡ï¼Œéœ€å°†è¯¥æ§½åˆ é™¤
</span>    <span class="k">def</span> <span class="nf">dormcost</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vec</span><span class="p">):</span>
        <span class="n">cost</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># å»ºç«‹æ§½
</span>        <span class="n">slots</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dorms</span><span class="p">)):</span>
            <span class="n">slots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">slots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="c1"># å¾ªç¯é¢˜è§£
</span>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">vec</span><span class="p">)):</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">slots</span><span class="p">[</span><span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dorms</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">cost</span> <span class="o">+=</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dorms</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">cost</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">cost</span> <span class="o">+=</span> <span class="mi">3</span>
            <span class="k">del</span> <span class="n">slots</span><span class="p">[</span><span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
        <span class="k">return</span> <span class="n">cost</span>

    <span class="s">"""
    ä¸‹åˆ—å‡½æ•°ä¸ optimization ä¸­å‡½æ•°ç›¸åŒï¼Œåªä¸è¿‡ä»£ä»·å‡½æ•°å’Œè¾“å‡ºå‡½æ•°ç”¨æœ¬é—®é¢˜çš„è¾“å‡ºå‡½æ•°
    """</span>
    <span class="c1"># æœç´¢æ–¹æ³•1: éšæœºæœç´¢ç®—æ³•
</span>    <span class="c1"># å‡½æ•°ä¼šä½œ1000æ¬¡éšæœºçŒœæµ‹ï¼Œè®°å½•æ€»ä»£ä»·æœ€ä½çš„æ–¹æ³•. domainä¸ºèˆªç­å·çš„èŒƒå›´ï¼ˆ0-9ï¼‰ï¼Œå…±æœ‰5ä¸ªäººï¼Œå› æ­¤å…±æœ‰10é¡¹
</span>    <span class="k">def</span> <span class="nf">randomoptimize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">):</span>
        <span class="n">best_sol</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">bestcost</span> <span class="o">=</span> <span class="mi">99999</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
            <span class="n">sol</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">):</span>  <span class="c1"># äººæ•°
</span>                <span class="n">sol</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">domain</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">domain</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">j</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">sol</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">domain</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">domain</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>

            <span class="k">print</span> <span class="n">sol</span><span class="p">[:]</span>
            <span class="n">newcost</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dormcost</span><span class="p">(</span><span class="n">sol</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">newcost</span> <span class="o">&lt;</span> <span class="n">bestcost</span><span class="p">:</span>
                <span class="n">bestcost</span> <span class="o">=</span> <span class="n">newcost</span>
                <span class="n">best_sol</span> <span class="o">=</span> <span class="n">sol</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">continue</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">printsolution</span><span class="p">(</span><span class="n">best_sol</span><span class="p">)</span>
        <span class="k">print</span> <span class="s">"éšæœºæœç´¢ç®—æ³•çš„ç»“æœçš„æœ€å°ä»£ä»·æ˜¯ï¼š"</span><span class="p">,</span> <span class="n">bestcost</span>
        <span class="k">return</span> <span class="n">best_sol</span>

    <span class="c1"># æœç´¢ç®—æ³•2ï¼šçˆ¬å±±æ³•
</span>    <span class="c1"># é¦–å…ˆéšæœºé€‰æ‹©ä¸€ä¸ªè§£ä½œä¸ºç§å­è§£ï¼Œæ¯æ¬¡å¯»æ‰¾è¿™ä¸ªç§å­ç›¸è¿‘çš„è§£ï¼Œå¦‚æœç›¸è¿‘çš„è§£æœ‰ä»£ä»·æ›´å°çš„è§£ï¼Œåˆ™æŠŠè¿™ä¸ªæ–°çš„è§£ä½œä¸ºç§å­
</span>    <span class="c1"># ä¾æ¬¡å¾ªç¯è¿›è¡Œï¼Œå½“å¾ªç¯åˆ°æŸç§å­é™„è¿‘çš„è§£éƒ½æ¯”è¯¥ç§å­çš„ä»£ä»·å¤§æ—¶ï¼Œè¯´æ˜åˆ°è¾¾äº†å±€éƒ¨æå°å€¼ç‚¹ï¼Œæœç´¢ç»“æŸ
</span>    <span class="k">def</span> <span class="nf">hillclimb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">):</span>
        <span class="c1"># éšæœºäº§ç”Ÿä¸€ä¸ªèˆªç­åºåˆ—ä½œä¸ºåˆå§‹ç§å­
</span>        <span class="n">seed</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">))]</span>
        <span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">neighbor</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="c1"># å¾ªç¯æ”¹å˜è§£çš„æ¯ä¸€ä¸ªå€¼äº§ç”Ÿä¸€ä¸ªä¸´è¿‘è§£çš„åˆ—è¡¨
</span>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)):</span>
                <span class="c1"># ä¸‹åˆ—åˆ¤æ–­æ˜¯ä¸ºäº†å°†æŸä¸€ä½åŠ å‡1åä¸è¶…å‡ºdomainçš„èŒƒå›´
</span>                <span class="c1"># print seed
</span>                <span class="k">if</span> <span class="n">seed</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="n">newneighbor</span> <span class="o">=</span> <span class="n">seed</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">seed</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">seed</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]</span>
                    <span class="c1"># print newneighbor[:]
</span>                    <span class="n">neighbor</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newneighbor</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">seed</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="n">newneighbor</span> <span class="o">=</span> <span class="n">seed</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">seed</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">seed</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]</span>
                    <span class="c1"># print newneighbor[:]
</span>                    <span class="n">neighbor</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newneighbor</span><span class="p">)</span>

            <span class="c1"># å¯¹æ‰€æœ‰çš„ä¸´è¿‘è§£è®¡ç®—ä»£ä»·ï¼Œæ’åºï¼Œå¾—åˆ°ä»£ä»·æœ€å°çš„è§£
</span>            <span class="n">neighbor_cost</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span>
                <span class="p">[(</span><span class="n">s</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dormcost</span><span class="p">(</span><span class="n">s</span><span class="p">))</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">neighbor</span><span class="p">],</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

            <span class="c1"># å¦‚æœæ–°çš„æœ€å°ä»£ä»· &gt; åŸç§å­ä»£ä»·ï¼Œåˆ™è·³å‡ºå¾ªç¯
</span>            <span class="k">if</span> <span class="n">neighbor_cost</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">dormcost</span><span class="p">(</span><span class="n">seed</span><span class="p">):</span>
                <span class="k">break</span>

            <span class="c1"># æ–°çš„ä»£ä»·æ›´å°çš„ä¸´è¿‘è§£ä½œä¸ºæ–°çš„ç§å­
</span>            <span class="n">seed</span> <span class="o">=</span> <span class="n">neighbor_cost</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">print</span> <span class="s">"newseed = "</span><span class="p">,</span> <span class="n">seed</span><span class="p">[:],</span> <span class="s">" ä»£ä»·ï¼š"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dormcost</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span>
        <span class="c1"># è¾“å‡º
</span>        <span class="bp">self</span><span class="o">.</span><span class="n">printsolution</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span>
        <span class="k">print</span> <span class="s">"çˆ¬å±±æ³•å¾—åˆ°çš„è§£çš„æœ€å°ä»£ä»·æ˜¯"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dormcost</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">seed</span>

    <span class="c1"># æœç´¢ç®—æ³•4ï¼šæ¨¡æ‹Ÿé€€ç«ç®—æ³•
</span>    <span class="c1"># å‚æ•°ï¼šTä»£è¡¨åŸå§‹æ¸©åº¦ï¼Œcoolä»£è¡¨å†·å´ç‡ï¼Œstepä»£è¡¨æ¯æ¬¡é€‰æ‹©ä¸´è¿‘è§£çš„å˜åŒ–èŒƒå›´
</span>    <span class="c1"># åŸç†ï¼šé€€ç«ç®—æ³•ä»¥ä¸€ä¸ªé—®é¢˜çš„éšæœºè§£å¼€å§‹ï¼Œç”¨ä¸€ä¸ªå˜é‡è¡¨ç¤ºæ¸©åº¦ï¼Œè¿™ä¸€æ¸©åº¦å¼€å§‹æ—¶éå¸¸é«˜ï¼Œè€Œåé€æ­¥é™ä½
</span>    <span class="c1">#      åœ¨æ¯ä¸€æ¬¡è¿­ä»£æœŸé—´ï¼Œç®—å•Šä¼šéšæœºé€‰ä¸­é¢˜è§£ä¸­çš„æŸä¸ªæ•°å­—ï¼Œç„¶åæœæŸä¸ªæ–¹å‘å˜åŒ–ã€‚å¦‚æœæ–°çš„æˆæœ¬å€¼æ›´
</span>    <span class="c1">#      ä½ï¼Œåˆ™æ–°çš„é¢˜è§£å°†ä¼šå˜æˆå½“å‰é¢˜è§£ï¼Œè¿™ä¸çˆ¬å±±æ³•ç±»ä¼¼ã€‚ä¸è¿‡ï¼Œå¦‚æœæˆæœ¬å€¼æ›´é«˜çš„è¯ï¼Œåˆ™æ–°çš„é¢˜è§£ä»
</span>    <span class="c1">#      æœ‰å¯èƒ½æˆä¸ºå½“å‰é¢˜è§£ï¼Œè¿™æ˜¯é¿å…å±€éƒ¨æå°å€¼é—®é¢˜çš„ä¸€ç§å°è¯•ã€‚
</span>    <span class="c1"># æ³¨æ„ï¼šç®—æ³•æ€»ä¼šæ¥å—ä¸€ä¸ªæ›´ä¼˜çš„è§£ï¼Œè€Œä¸”åœ¨é€€ç«çš„å¼€å§‹é˜¶æ®µä¼šæ¥å—è¾ƒå·®çš„è§£ï¼Œéšç€é€€ç«çš„ä¸æ–­è¿›è¡Œï¼Œç®—æ³•
</span>    <span class="c1">#      åŸæ¥è¶Šä¸èƒ½æ¥å—è¾ƒå·®çš„è§£ï¼Œç›´åˆ°æœ€åï¼Œå®ƒåªèƒ½æ¥å—æ›´ä¼˜çš„è§£ã€‚
</span>    <span class="c1"># ç®—æ³•æ¥å—è¾ƒå·®è§£çš„æ¦‚ç‡ P = exp[-(highcost-lowcost)/temperature]
</span>    <span class="k">def</span> <span class="nf">annealingoptimize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">T</span><span class="o">=</span><span class="mf">10000.0</span><span class="p">,</span> <span class="n">cool</span><span class="o">=</span><span class="mf">0.98</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="c1"># éšæœºåˆå§‹åŒ–å€¼
</span>        <span class="n">vec</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">))]</span>

        <span class="c1"># å¾ªç¯
</span>        <span class="k">while</span> <span class="n">T</span> <span class="o">&gt;</span> <span class="mf">0.1</span><span class="p">:</span>
            <span class="c1"># é€‰æ‹©ä¸€ä¸ªç´¢å¼•å€¼
</span>            <span class="n">i</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="c1"># é€‰æ‹©ä¸€ä¸ªæ”¹å˜ç´¢å¼•å€¼çš„æ–¹å‘
</span>            <span class="n">c</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="n">step</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span>  <span class="c1"># -1 or 0 or 1
</span>            <span class="c1"># æ„é€ æ–°çš„è§£
</span>            <span class="n">vecb</span> <span class="o">=</span> <span class="n">vec</span><span class="p">[:]</span>
            <span class="n">vecb</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">c</span>
            <span class="k">if</span> <span class="n">vecb</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>  <span class="c1"># åˆ¤æ–­è¶Šç•Œæƒ…å†µ
</span>                <span class="n">vecb</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">vecb</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">vecb</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>

            <span class="c1"># è®¡ç®—å½“å‰æˆæœ¬å’Œæ–°çš„æˆæœ¬
</span>            <span class="n">cost1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dormcost</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span>
            <span class="n">cost2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dormcost</span><span class="p">(</span><span class="n">vecb</span><span class="p">)</span>

            <span class="c1"># åˆ¤æ–­æ–°çš„è§£æ˜¯å¦ä¼˜äºåŸå§‹è§£ æˆ–è€… ç®—æ³•å°†ä»¥ä¸€å®šæ¦‚ç‡æ¥å—è¾ƒå·®çš„è§£
</span>            <span class="k">if</span> <span class="n">cost2</span> <span class="o">&lt;</span> <span class="n">cost1</span> <span class="ow">or</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">math</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">cost2</span> <span class="o">-</span> <span class="n">cost1</span><span class="p">)</span> <span class="o">/</span> <span class="n">T</span><span class="p">):</span>
                <span class="n">vec</span> <span class="o">=</span> <span class="n">vecb</span>

            <span class="n">T</span> <span class="o">=</span> <span class="n">T</span> <span class="o">*</span> <span class="n">cool</span>  <span class="c1"># æ¸©åº¦å†·å´
</span>            <span class="k">print</span> <span class="n">vecb</span><span class="p">[:],</span> <span class="s">"ä»£ä»·:"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dormcost</span><span class="p">(</span><span class="n">vecb</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">printsolution</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span>
        <span class="k">print</span> <span class="s">"æ¨¡æ‹Ÿé€€ç«ç®—æ³•å¾—åˆ°çš„æœ€å°ä»£ä»·æ˜¯ï¼š"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dormcost</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">vec</span>

    <span class="c1"># æœç´¢ç®—æ³•5ï¼š é—ä¼ ç®—æ³•
</span>    <span class="c1"># åŸç†ï¼š é¦–å…ˆéšæœºç”Ÿæˆä¸€ç»„è§£ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºç§ç¾¤ï¼Œåœ¨ä¼˜åŒ–è¿‡ç¨‹çš„æ¯ä¸€æ­¥ï¼Œç®—æ³•ä¼šè®¡ç®—æ•´ä¸ªç§ç¾¤çš„æˆæœ¬å‡½æ•°ï¼Œ
</span>    <span class="c1">#       ä»è€Œå¾—åˆ°ä¸€ä¸ªæœ‰å…³é¢˜è§£çš„æœ‰åºåˆ—è¡¨ã€‚éšåæ ¹æ®ç§ç¾¤æ„é€ è¿›åŒ–çš„ä¸‹ä¸€ä»£ç§ç¾¤ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š
</span>    <span class="c1">#       é—ä¼ ï¼šä»å½“å‰ç§ç¾¤ä¸­é€‰å‡ºä»£ä»·æœ€ä¼˜çš„ä¸€éƒ¨åˆ†åŠ å…¥ä¸‹ä¸€ä»£ç§ç¾¤ï¼Œç§°ä¸ºâ€œç²¾è‹±é€‰æ‹”â€
</span>    <span class="c1">#       å˜å¼‚ï¼šå¯¹ä¸€ä¸ªæ—¢æœ‰è§£è¿›è¡Œå¾®å°çš„ã€ç®€å•çš„ã€éšæœºçš„ä¿®æ”¹
</span>    <span class="c1">#       äº¤å‰ï¼šé€‰å–æœ€ä¼˜è§£ä¸­çš„ä¸¤ä¸ªè§£ï¼ŒæŒ‰ç…§æŸç§æ–¹å¼è¿›è¡Œäº¤å‰ã€‚æ–¹æ³•æœ‰å•ç‚¹äº¤å‰ï¼Œå¤šç‚¹äº¤å‰å’Œå‡åŒ€äº¤å‰
</span>    <span class="c1"># ä¸€ä¸ªç§ç¾¤æ˜¯é€šè¿‡å¯¹æœ€ä¼˜è§£è¿›è¡Œéšæœºçš„å˜å¼‚å’Œé…å¯¹å¤„ç†æ„é€ å‡ºæ¥çš„ï¼Œå®ƒçš„å¤§å°é€šå¸¸ä¸æ—§çš„ç§ç¾¤ç›¸åŒï¼Œå°”åï¼Œè¿™ä¸€è¿‡ç¨‹ä¼š
</span>    <span class="c1">#       ä¸€ç›´é‡å¤è¿›è¡Œâ€”â€”â€”â€”æ–°çš„ç§ç¾¤ç»è¿‡æ’åºï¼Œåˆä¸€ä¸ªç§ç¾¤è¢«æ„é€ å‡ºæ¥ï¼Œå¦‚æœè¾¾åˆ°æŒ‡å®šçš„è¿­ä»£æ¬¡æ•°ä¹‹åé¢˜è§£éƒ½æ²¡æœ‰å¾—
</span>    <span class="c1">#       æ”¹å–„ï¼Œæ•´ä¸ªè¿‡ç¨‹å°±ç»“æŸäº†
</span>    <span class="c1"># å‚æ•°ï¼š
</span>    <span class="c1"># popsize-ç§ç¾¤æ•°é‡ step-å˜å¼‚æ”¹å˜çš„å¤§å° mutprob-äº¤å‰å’Œå˜å¼‚çš„æ¯”ä¾‹ elite-ç›´æ¥é—ä¼ çš„æ¯”ä¾‹ maxiter-æœ€å¤§è¿­ä»£æ¬¡æ•°
</span>    <span class="k">def</span> <span class="nf">geneticoptimize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">popsize</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">mutprob</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">elite</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">maxiter</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
        <span class="c1"># å˜å¼‚æ“ä½œçš„å‡½æ•°
</span>        <span class="k">def</span> <span class="nf">mutate</span><span class="p">(</span><span class="n">vec</span><span class="p">):</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.5</span> <span class="ow">and</span> <span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="n">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">step</span><span class="p">]</span> <span class="o">+</span> <span class="n">vec</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]</span>
            <span class="k">elif</span> <span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="n">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">step</span><span class="p">]</span> <span class="o">+</span> <span class="n">vec</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="n">vec</span>
            <span class="k">return</span> <span class="n">res</span>

        <span class="c1"># äº¤å‰æ“ä½œçš„å‡½æ•°ï¼ˆå•ç‚¹äº¤å‰ï¼‰
</span>        <span class="k">def</span> <span class="nf">crossover</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">):</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">r1</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">r2</span><span class="p">[</span><span class="n">i</span><span class="p">:]</span>

        <span class="c1"># æ„é€ åˆå§‹ç§ç¾¤
</span>        <span class="n">pop</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">popsize</span><span class="p">):</span>
            <span class="n">vec</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">))]</span>
            <span class="n">pop</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span>

        <span class="c1"># æ¯ä¸€ä»£ä¸­æœ‰å¤šå°‘èƒœå‡ºè€…
</span>        <span class="n">topelite</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">elite</span> <span class="o">*</span> <span class="n">popsize</span><span class="p">)</span>

        <span class="c1"># ä¸»å¾ªç¯
</span>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">maxiter</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">[]</span> <span class="ow">in</span> <span class="n">pop</span><span class="p">:</span>
                <span class="k">print</span> <span class="s">"***"</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">scores</span> <span class="o">=</span> <span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">dormcost</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">pop</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">print</span> <span class="s">"pop!!"</span><span class="p">,</span> <span class="n">pop</span><span class="p">[:]</span>
            <span class="n">scores</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="n">ranked</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span> <span class="k">for</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">in</span> <span class="n">scores</span><span class="p">]</span>  <span class="c1"># è§£æŒ‰ç…§ä»£ä»·ç”±å°åˆ°å¤§çš„æ’åº
</span>
            <span class="c1"># ä¼˜è´¨è§£é—ä¼ åˆ°ä¸‹ä¸€ä»£
</span>            <span class="n">pop</span> <span class="o">=</span> <span class="n">ranked</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span> <span class="n">topelite</span><span class="p">]</span>
            <span class="c1"># å¦‚æœå½“å‰ç§ç¾¤æ•°é‡å°äºæ—¢å®šæ•°é‡ï¼Œåˆ™æ·»åŠ å˜å¼‚å’Œäº¤å‰é—ä¼ 
</span>            <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">pop</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">popsize</span><span class="p">:</span>
                <span class="c1"># éšæœºæ•°å°äº mutprob åˆ™å˜å¼‚ï¼Œå¦åˆ™äº¤å‰
</span>                <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">mutprob</span><span class="p">:</span>  <span class="c1"># mutprobæ§åˆ¶äº¤å‰å’Œå˜å¼‚çš„æ¯”ä¾‹
</span>                    <span class="c1"># é€‰æ‹©ä¸€ä¸ªä¸ªä½“
</span>                    <span class="n">c</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">topelite</span><span class="p">)</span>
                    <span class="c1"># å˜å¼‚
</span>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ranked</span><span class="p">[</span><span class="n">c</span><span class="p">])</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefs</span><span class="p">):</span>
                        <span class="n">temp</span> <span class="o">=</span> <span class="n">mutate</span><span class="p">(</span><span class="n">ranked</span><span class="p">[</span><span class="n">c</span><span class="p">])</span>
                        <span class="k">if</span> <span class="n">temp</span> <span class="o">==</span> <span class="p">[]:</span>
                            <span class="k">print</span> <span class="s">"******"</span><span class="p">,</span> <span class="n">ranked</span><span class="p">[</span><span class="n">c</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">pop</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># éšæœºé€‰æ‹©ä¸¤ä¸ªä¸ªä½“è¿›è¡Œäº¤å‰
</span>                    <span class="n">c1</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">topelite</span><span class="p">)</span>
                    <span class="n">c2</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">topelite</span><span class="p">)</span>
                    <span class="n">pop</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">crossover</span><span class="p">(</span><span class="n">ranked</span><span class="p">[</span><span class="n">c1</span><span class="p">],</span> <span class="n">ranked</span><span class="p">[</span><span class="n">c2</span><span class="p">]))</span>
            <span class="c1"># è¾“å‡ºå½“å‰ç§ç¾¤ä¸­ä»£ä»·æœ€å°çš„è§£
</span>            <span class="k">print</span> <span class="n">scores</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="s">"ä»£ä»·ï¼š"</span><span class="p">,</span> <span class="n">scores</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">printsolution</span><span class="p">(</span><span class="n">scores</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">print</span> <span class="s">"é—ä¼ ç®—æ³•æ±‚å¾—çš„æœ€å°ä»£ä»·ï¼š"</span><span class="p">,</span> <span class="n">scores</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">scores</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">dormsol</span> <span class="o">=</span> <span class="n">dorm</span><span class="p">()</span>
    <span class="c1">#sol = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
</span>    <span class="c1">#dormsol.printsolution(sol)
</span>    <span class="c1">#dormsol.dormcost(sol)
</span>
    <span class="n">domain</span> <span class="o">=</span> <span class="n">dormsol</span><span class="o">.</span><span class="n">domain</span>

    <span class="c1"># æ–¹æ³•1ï¼šéšæœºçŒœæµ‹
</span>    <span class="c1">#dormsol.randomoptimize(domain)
</span>
    <span class="c1"># æ–¹æ³•2ï¼šçˆ¬å±±æ³•
</span>    <span class="c1">#dormsol.hillclimb(domain)
</span>
    <span class="c1"># æ–¹æ³•3ï¼šæ¨¡æ‹Ÿé€€ç«æ³•
</span>    <span class="c1">#dormsol.annealingoptimize(domain)
</span>
    <span class="c1"># æ–¹æ³•4ï¼šé—ä¼ ç®—æ³•
</span>    <span class="n">dormsol</span><span class="o">.</span><span class="n">geneticoptimize</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å‚è€ƒèµ„æ–™ï¼šhttps://blog.csdn.net/bcj296050240/article/details/50839806</p>

<h2 id="æ’æ–™ç®—æ³•åº”ç”¨">æ’æ–™ç®—æ³•åº”ç”¨</h2>

<h3 id="ï¸-not-fit-polygon">â˜£ï¸ Not-fit Polygon</h3>

<h3 id="ï¸-ç¢°æ’æ³•">â˜£ï¸ ç¢°æ’æ³•</h3>

<h3 id="ï¸-å·¦åº•éƒ¨ç®—æ³•">â˜£ï¸ å·¦åº•éƒ¨ç®—æ³•</h3>

<h2 id="å¤§è§„æ¨¡åˆ†è§£ç®—æ³•">å¤§è§„æ¨¡åˆ†è§£ç®—æ³•</h2>

<h3 id="ï¸-åˆ—ç”Ÿæˆcolumn-generation">â˜£ï¸ åˆ—ç”Ÿæˆï¼ˆColumn Generationï¼‰</h3>

<h3 id="ï¸-benders-decomposition">â˜£ï¸ Benders Decomposition</h3>

<h3 id="ï¸-dantzig-wolfe-decomposition">â˜£ï¸ Dantzig-Wolfe Decomposition</h3>

<h3 id="ï¸-åˆ†æ”¯å®šä»·æ³•branch-and-price">â˜£ï¸ åˆ†æ”¯å®šä»·æ³•ï¼ˆBranch and Priceï¼‰</h3>

<h2 id="ç»å…¸é—®é¢˜">ç»å…¸é—®é¢˜</h2>

<h3 id="ï¸-æ—…è¡Œå•†é—®é¢˜">â˜£ï¸ æ—…è¡Œå•†é—®é¢˜</h3>

<blockquote>
  <p>é‡‡ç”¨è¿›åŒ–ç®—æ³•è§£å†³</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
</pre></td><td class="rouge-code"><pre><span class="c1"># -*- coding: utf-8 -*-
</span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="n">N_CITIES</span> <span class="o">=</span> <span class="mi">20</span>  <span class="c1"># åŸå¸‚æ•°é‡
</span><span class="n">CROSS_RATE</span> <span class="o">=</span> <span class="mf">0.1</span>  <span class="c1"># DNAäº¤å‰æ¦‚ç‡
</span><span class="n">MUTATE_RATE</span> <span class="o">=</span> <span class="mf">0.02</span>  <span class="c1"># å˜å¼‚æ¦‚ç‡
</span><span class="n">POP_SIZE</span> <span class="o">=</span> <span class="mi">500</span>  <span class="c1"># ä¸ªä½“æ•°é‡
</span><span class="n">N_GENERATIONS</span> <span class="o">=</span> <span class="mi">500</span>  <span class="c1"># è¿­ä»£è½®æ•°
</span>

<span class="k">class</span> <span class="nc">GA</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">DNA_size</span><span class="p">,</span> <span class="n">cross_rate</span><span class="p">,</span> <span class="n">mutation_rate</span><span class="p">,</span> <span class="n">pop_size</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">DNA_size</span> <span class="o">=</span> <span class="n">DNA_size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cross_rate</span> <span class="o">=</span> <span class="n">cross_rate</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mutate_rate</span> <span class="o">=</span> <span class="n">mutation_rate</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span> <span class="o">=</span> <span class="n">pop_size</span>
        <span class="c1">#  åˆå§‹åŒ–æ¯ä¸ªä¸ªä½“çš„DNA
</span>        <span class="bp">self</span><span class="o">.</span><span class="n">pop</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">permutation</span><span class="p">(</span><span class="n">DNA_size</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">pop_size</span><span class="p">)])</span>

    <span class="k">def</span> <span class="nf">translateDNA</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">DNA</span><span class="p">,</span> <span class="n">city_position</span><span class="p">):</span>   <span class="c1"># è·å¾—æ¯ä¸ªåŸå¸‚çš„åæ ‡
</span>        <span class="n">line_x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty_like</span><span class="p">(</span><span class="n">DNA</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
        <span class="n">line_y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty_like</span><span class="p">(</span><span class="n">DNA</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">DNA</span><span class="p">):</span>
            <span class="n">city_coord</span> <span class="o">=</span> <span class="n">city_position</span><span class="p">[</span><span class="n">d</span><span class="p">]</span>
            <span class="n">line_x</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">city_coord</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">line_y</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">city_coord</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">line_x</span><span class="p">,</span> <span class="n">line_y</span>

    <span class="k">def</span> <span class="nf">get_fitness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line_x</span><span class="p">,</span> <span class="n">line_y</span><span class="p">):</span>
        <span class="n">total_distance</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">line_x</span><span class="p">,</span> <span class="n">line_y</span><span class="p">)):</span>
            <span class="n">total_distance</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="nb">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">square</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">xs</span><span class="p">))</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">square</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">ys</span><span class="p">))))</span>
        <span class="n">fitness</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">DNA_size</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">/</span> <span class="n">total_distance</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fitness</span><span class="p">,</span> <span class="n">total_distance</span>

    <span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fitness</span><span class="p">):</span>  <span class="c1"># é€‚åº”åº¦é«˜çš„DNAæœ‰æ›´å¤§çš„æ¦‚ç‡ä¿ç•™
</span>        <span class="n">idx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">fitness</span> <span class="o">/</span> <span class="n">fitness</span><span class="o">.</span><span class="nb">sum</span><span class="p">())</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">crossover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">pop</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">cross_rate</span><span class="p">:</span>
            <span class="n">i_</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># é€‰æ‹©å¦ä¸€ä¸ªä½“
</span>            <span class="n">cross_points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">DNA_size</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="nb">bool</span><span class="p">)</span>  <span class="c1"># ç¡®å®šDNAå¦‚ä½•äº¤å‰
</span>            <span class="n">keep_city</span> <span class="o">=</span> <span class="n">parent</span><span class="p">[</span><span class="o">~</span><span class="n">cross_points</span><span class="p">]</span>
            <span class="n">swap_city</span> <span class="o">=</span> <span class="n">pop</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">pop</span><span class="p">[</span><span class="n">i_</span><span class="p">]</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span> <span class="n">keep_city</span><span class="p">,</span> <span class="n">invert</span><span class="o">=</span><span class="bp">True</span><span class="p">)]</span>
            <span class="n">parent</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">keep_city</span><span class="p">,</span> <span class="n">swap_city</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">parent</span>

    <span class="k">def</span> <span class="nf">mutate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">child</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">DNA_size</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutate_rate</span><span class="p">:</span>  <span class="c1"># å˜å¼‚ï¼šäº¤æ¢ä¸¤ä¸ªåŸºå› 
</span>                <span class="n">swap_point</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">DNA_size</span><span class="p">)</span>
                <span class="n">swapA</span><span class="p">,</span> <span class="n">swapB</span> <span class="o">=</span> <span class="n">child</span><span class="p">[</span><span class="n">point</span><span class="p">],</span> <span class="n">child</span><span class="p">[</span><span class="n">swap_point</span><span class="p">]</span>
                <span class="n">child</span><span class="p">[</span><span class="n">point</span><span class="p">],</span> <span class="n">child</span><span class="p">[</span><span class="n">swap_point</span><span class="p">]</span> <span class="o">=</span> <span class="n">swapB</span><span class="p">,</span> <span class="n">swapA</span>
        <span class="k">return</span> <span class="n">child</span>

    <span class="k">def</span> <span class="nf">evolve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fitness</span><span class="p">):</span>
        <span class="n">pop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span>
        <span class="n">pop_copy</span> <span class="o">=</span> <span class="n">pop</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">parent</span> <span class="ow">in</span> <span class="n">pop</span><span class="p">:</span>  <span class="c1"># for every parent
</span>            <span class="n">child</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crossover</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">pop_copy</span><span class="p">)</span>
            <span class="n">child</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
            <span class="n">parent</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">child</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pop</span> <span class="o">=</span> <span class="n">pop</span>


<span class="k">class</span> <span class="nc">TravelSalesPerson</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_cities</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">city_position</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">n_cities</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># åˆå§‹åŒ–æ¯ä¸ªåŸå¸‚çš„åæ ‡
</span>        <span class="n">plt</span><span class="o">.</span><span class="n">ion</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">plotting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lx</span><span class="p">,</span> <span class="n">ly</span><span class="p">,</span> <span class="n">total_d</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">city_position</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">city_position</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s">'k'</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">lx</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">ly</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="s">'r-'</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="s">"Total distance=</span><span class="si">%.2</span><span class="s">f"</span> <span class="o">%</span> <span class="n">total_d</span><span class="p">,</span> <span class="n">fontdict</span><span class="o">=</span><span class="p">{</span><span class="s">'size'</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="s">'color'</span><span class="p">:</span> <span class="s">'red'</span><span class="p">})</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">((</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">))</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">((</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">))</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">pause</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>

<span class="n">ga</span> <span class="o">=</span> <span class="n">GA</span><span class="p">(</span><span class="n">DNA_size</span><span class="o">=</span><span class="n">N_CITIES</span><span class="p">,</span> <span class="n">cross_rate</span><span class="o">=</span><span class="n">CROSS_RATE</span><span class="p">,</span> <span class="n">mutation_rate</span><span class="o">=</span><span class="n">MUTATE_RATE</span><span class="p">,</span> <span class="n">pop_size</span><span class="o">=</span><span class="n">POP_SIZE</span><span class="p">)</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">TravelSalesPerson</span><span class="p">(</span><span class="n">N_CITIES</span><span class="p">)</span>  <span class="c1"># åˆå§‹åŒ–æ¯ä¸ªåŸå¸‚çš„åæ ‡
</span>
<span class="k">for</span> <span class="n">generation</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N_GENERATIONS</span><span class="p">):</span>
    <span class="n">lx</span><span class="p">,</span> <span class="n">ly</span> <span class="o">=</span> <span class="n">ga</span><span class="o">.</span><span class="n">translateDNA</span><span class="p">(</span><span class="n">ga</span><span class="o">.</span><span class="n">pop</span><span class="p">,</span> <span class="n">env</span><span class="o">.</span><span class="n">city_position</span><span class="p">)</span>  <span class="c1"># å°†DNAä¸­çš„åŸå¸‚idè½¬æ¢ä¸ºåŸå¸‚åæ ‡
</span>    <span class="n">fitness</span><span class="p">,</span> <span class="n">total_distance</span> <span class="o">=</span> <span class="n">ga</span><span class="o">.</span><span class="n">get_fitness</span><span class="p">(</span><span class="n">lx</span><span class="p">,</span> <span class="n">ly</span><span class="p">)</span>
    <span class="n">ga</span><span class="o">.</span><span class="n">evolve</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span>  <span class="c1"># æ¨¡æ‹Ÿè¿›åŒ–è¿‡ç¨‹
</span>    <span class="n">best_idx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Gen:'</span><span class="p">,</span> <span class="n">generation</span><span class="p">,</span> <span class="s">'| best fit: </span><span class="si">%.2</span><span class="s">f'</span> <span class="o">%</span> <span class="n">fitness</span><span class="p">[</span><span class="n">best_idx</span><span class="p">],)</span>

    <span class="n">env</span><span class="o">.</span><span class="n">plotting</span><span class="p">(</span><span class="n">lx</span><span class="p">[</span><span class="n">best_idx</span><span class="p">],</span> <span class="n">ly</span><span class="p">[</span><span class="n">best_idx</span><span class="p">],</span> <span class="n">total_distance</span><span class="p">[</span><span class="n">best_idx</span><span class="p">])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">ioff</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="ï¸-0-1-èƒŒåŒ…é—®é¢˜">â˜£ï¸ 0-1 èƒŒåŒ…é—®é¢˜</h3>

<blockquote>
  <p>è¿›åŒ–ç®—æ³•è§£å†³</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
</pre></td><td class="rouge-code"><pre><span class="c1"># -*- coding: utf-8 -*-
</span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="n">N_ITEMS</span> <span class="o">=</span> <span class="mi">20</span>  <span class="c1"># ç‰©å“æ•°é‡
</span><span class="n">CROSS_RATE</span> <span class="o">=</span> <span class="mf">0.5</span>  <span class="c1"># DNAäº¤å‰æ¦‚ç‡
</span><span class="n">MUTATE_RATE</span> <span class="o">=</span> <span class="mf">0.01</span>  <span class="c1"># å˜å¼‚æ¦‚ç‡
</span><span class="n">POP_SIZE</span> <span class="o">=</span> <span class="mi">400</span>  <span class="c1"># ä¸ªä½“æ•°é‡
</span><span class="n">N_GENERATIONS</span> <span class="o">=</span> <span class="mi">20</span>  <span class="c1"># è¿­ä»£è½®æ•°
</span>

<span class="k">class</span> <span class="nc">GA</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">DNA_size</span><span class="p">,</span> <span class="n">cross_rate</span><span class="p">,</span> <span class="n">mutate_rate</span><span class="p">,</span> <span class="n">pop_size</span><span class="p">,</span> <span class="n">n_generations</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">DNA_size</span> <span class="o">=</span> <span class="n">DNA_size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cross_rate</span> <span class="o">=</span> <span class="n">cross_rate</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mutate_rate</span> <span class="o">=</span> <span class="n">mutate_rate</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span> <span class="o">=</span> <span class="n">pop_size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_generations</span> <span class="o">=</span> <span class="n">n_generations</span>
        <span class="c1">#  åˆå§‹åŒ–æ¯ä¸ªä¸ªä½“çš„DNA
</span>        <span class="bp">self</span><span class="o">.</span><span class="n">pop</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">pop_size</span><span class="p">,</span> <span class="n">DNA_size</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">get_fitness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
        <span class="n">fitness</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">individual</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">):</span>  <span class="c1"># è®¡ç®—æ¯ä¸ªä¸ªä½“çš„fitnesså’Œweight
</span>            <span class="n">weight</span> <span class="o">=</span> <span class="n">w</span><span class="p">[</span><span class="n">individual</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="nb">bool</span><span class="p">)]</span><span class="o">.</span><span class="nb">sum</span><span class="p">()</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">individual</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="nb">bool</span><span class="p">)]</span><span class="o">.</span><span class="nb">sum</span><span class="p">()</span>
            <span class="c1"># è‹¥ç‰©å“æ€»é‡é‡è¶…è¿‡capacityï¼Œåˆ™fitnessä¸º0
</span>            <span class="n">fitness</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">weight</span> <span class="o">&gt;</span> <span class="n">c</span> <span class="k">else</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">fitness</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">DNA_size</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fitness</span><span class="p">):</span>  <span class="c1"># é€‚åº”åº¦é«˜çš„DNAæœ‰æ›´å¤§çš„æ¦‚ç‡ä¿ç•™
</span>        <span class="n">index</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">fitness</span><span class="o">/</span><span class="n">fitness</span><span class="o">.</span><span class="nb">sum</span><span class="p">())</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">mutate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dna</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">DNA_size</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutate_rate</span><span class="p">:</span>
                <span class="n">dna</span><span class="p">[</span><span class="n">point</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">dna</span><span class="p">[</span><span class="n">point</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span>  <span class="c1"># å˜å¼‚
</span>
    <span class="k">def</span> <span class="nf">crossover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pop</span><span class="p">):</span>
        <span class="n">pop_copy</span> <span class="o">=</span> <span class="n">pop</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">cross_rate</span><span class="p">:</span>
                <span class="n">i_</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># é€‰æ‹©å¦ä¸€ä¸ªä½“
</span>                <span class="n">cross_points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DNA_size</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="nb">bool</span><span class="p">)</span>  <span class="c1"># ç¡®å®šDNAäº¤å‰ç‚¹
</span>                <span class="n">pop</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">cross_points</span><span class="p">]</span> <span class="o">=</span> <span class="n">pop_copy</span><span class="p">[</span><span class="n">i_</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="n">cross_points</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">pop</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>


<span class="n">c</span> <span class="o">=</span> <span class="mi">40</span>  <span class="c1"># èƒŒåŒ…å®¹é‡
</span><span class="n">w</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>  <span class="c1"># ç‰©å“é‡é‡
</span><span class="n">v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span>  <span class="c1"># ç‰©å“ä»·å€¼
</span>
<span class="n">ga</span> <span class="o">=</span> <span class="n">GA</span><span class="p">(</span><span class="n">N_ITEMS</span><span class="p">,</span> <span class="n">CROSS_RATE</span><span class="p">,</span> <span class="n">MUTATE_RATE</span><span class="p">,</span> <span class="n">POP_SIZE</span><span class="p">,</span> <span class="n">N_GENERATIONS</span><span class="p">)</span>

<span class="k">for</span> <span class="n">generation</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N_GENERATIONS</span><span class="p">):</span>
    <span class="n">fitness</span> <span class="o">=</span> <span class="n">ga</span><span class="o">.</span><span class="n">get_fitness</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
    <span class="n">pop</span> <span class="o">=</span> <span class="n">ga</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span>
    <span class="n">ga</span><span class="o">.</span><span class="n">crossover</span><span class="p">(</span><span class="n">pop</span><span class="p">)</span>
    <span class="n">best_idx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Gen:'</span><span class="p">,</span> <span class="n">generation</span><span class="p">,</span> <span class="s">'| best fit: </span><span class="si">%.2</span><span class="s">f'</span> <span class="o">%</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">fitness</span><span class="p">[</span><span class="n">best_idx</span><span class="p">])</span><span class="o">*</span><span class="n">ga</span><span class="o">.</span><span class="n">DNA_size</span><span class="p">),</span> <span class="s">'| items:'</span><span class="p">,</span> <span class="n">ga</span><span class="o">.</span><span class="n">pop</span><span class="p">[</span><span class="n">best_idx</span><span class="p">])</span>
    <span class="n">ga</span><span class="o">.</span><span class="n">pop</span> <span class="o">=</span> <span class="n">pop</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="å…¶ä»–æœªåˆ†ç±»">å…¶ä»–æœªåˆ†ç±»</h2>

<h3 id="-å¯å‘å¼ç®—æ³•">âœ… å¯å‘å¼ç®—æ³•</h3>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g83p9zif17j30iy0g676d.jpg" alt="Heuristic-Algorithms" /></p>

<h3 id="ï¸-æ‹‰æ ¼æœ—æ—¥æ¾å¼›">â˜£ï¸ æ‹‰æ ¼æœ—æ—¥æ¾å¼›</h3>

<h3 id="ï¸-è´ªå©ªç®—æ³•">â˜£ï¸ è´ªå©ªç®—æ³•</h3>

<h3 id="ï¸-ç½‘ç»œæµç®—æ³•">â˜£ï¸ ç½‘ç»œæµç®—æ³•</h3>

<h3 id="ï¸-å¹¶è¡Œè®¡ç®—">â˜£ï¸ å¹¶è¡Œè®¡ç®—</h3>

:ET